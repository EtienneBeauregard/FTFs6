<!DOCTYPE html>

<html>

    <head>
        <meta charset="ISO-8859-1">
        <title>Simple HTTP server</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script>
    		$(document).ready(function(){
    			jQuery.each( ["delete" ], function( i, method ) {
    				  jQuery[ method ] = function( url, data, callback, type ) {
    				    if ( jQuery.isFunction( data ) ) {
    				      type = type || callback;
    				      callback = data;
    				      data = undefined;
    				    }
    				 
    				    return jQuery.ajax({
    				      url: url,
    				      type: method,
    				      dataType: type,
    				      data: data,
    				      success: callback
    				    });
    				  };
    				});
    			
                $("button").click(function(){
                    var cipVar =document.getElementById('CIPString').value;
                    var nameVar =document.getElementById('NameString').value;
                    var passwordVar =document.getElementById('PasswordString').value;
                    var student=JSON.stringify({cip:cipVar,name:nameVar,password:passwordVar});
                    switch (parseInt($( this ).attr("value"))) {
                    case 0:
                        $.get("webapi/students/"+cipVar, function(data, status){
                        	alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
                        });
                        break;
                    case 1:
                    	$.get("webapi/students", function(data, status){
                        	alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
                        });
                        break;
                    case 2:
                    	 $.ajax({
                             type: "POST",
                             url: "webapi/students",
                             data: student,
                             contentType: "application/json; charset=utf-8",
                             crossDomain: true,
                             dataType: "json",
                             success: function (data, status, jqXHR) {

                            	 alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
                             },

                             error: function (jqXHR, status) {
                                 // error handler
                                 console.log(jqXHR);
                                 alert('fail' + status.code);
                             }
                          });
                        break;
                    case 3:
                    	$.ajax({
                            type: "PUT",
                            url: "webapi/students",
                            data: student,
                            contentType: "application/json; charset=utf-8",
                            crossDomain: true,
                            dataType: "json",
                            success: function (data, status, jqXHR) {

                           	 alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
                            },

                            error: function (jqXHR, status) {
                                // error handler
                                console.log(jqXHR);
                                alert('fail' + status.code);
                            }
                         });
                        break;
                    case 4:
                    	jQuery.delete("webapi/students/"+cipVar, function(data, status){
                        	alert("Data: " + JSON.stringify(data) + "\nStatus: " + status);
                        });
                        break;
                }
                });
            });
    	</script>
    </head>
    
    <body>
    
        <h1>
            Simple REST server
        </h1>
        
        <p>
            <b>Usage:</b> enter a string of text and press the button corresponding to the action desired.
        </p>
        
        
        <p> CIP: <input type="text" name="CIPString" id="CIPString"> </p>
        <p> Nom: <input type="text" name="NameString" id="NameString"> </p>
        <p> Mot de passe: <input type="password" name="PasswordString" id="PasswordString"> </p>
        <p> <button type="button" value=0 name="ButtonGet"> GET </button></p>
        <p> <button type="button" value=1 name="ButtonGetAll"> GET ALL </button></p>
        <p> <button type="button" value=2 name="ButtonPost"> POST </button></p>
        <p> <button type="button" value=3 name="ButtonPut"> PUT </button></p>
        <p> <button type="button" value=4 name="ButtonDelete"> DELETE </button></p>
    
    </body>

</html>